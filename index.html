<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Wolf Signals</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg-main: #020616;
      --bg-card: #05081c;
      --bg-card-soft: #090f2a;
      --accent: #00b4ff;
      --accent-soft: rgba(0, 180, 255, 0.25);
      --accent-strong: #00f6ff;
      --text-main: #f9fafb;
      --text-soft: #9ca3af;
      --line-soft: #1f2937;
      --green: #22c55e;
      --red: #ef4444;
      --yellow: #facc15;
      --pill-bg: #02091c;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
    }

    body {
      background: radial-gradient(circle at top, #051933 0, #00010a 55%, #000 100%);
      color: var(--text-main);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }

    .app {
      width: 100%;
      max-width: 420px;
      background: radial-gradient(circle at 0 0, #0b1220 0, #020617 55%, #020617 100%);
      border-radius: 24px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      box-shadow:
        0 18px 45px rgba(15, 23, 42, 0.9),
        0 0 45px rgba(59, 130, 246, 0.25);
      overflow: hidden;
    }

    .app-inner {
      padding: 16px 18px 18px 18px;
    }

    /* HEADER */

    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 14px;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .avatar {
      width: 34px;
      height: 34px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #f9fafb 0, #9ca3af 45%, #020617 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 18px rgba(56, 189, 248, 0.8);
      border: 2px solid rgba(56, 189, 248, 0.9);
      font-size: 20px;
    }

    .header-title {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .header-title h1 {
      font-size: 16px;
      font-weight: 700;
      letter-spacing: 0.03em;
      color: var(--accent-strong);
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .header-title span {
      font-size: 11px;
      color: var(--text-soft);
    }

    .status-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 9px;
      background: rgba(22, 163, 74, 0.13);
      border-radius: 999px;
      font-size: 11px;
      color: #bbf7d0;
      border: 1px solid rgba(34, 197, 94, 0.4);
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--green);
      box-shadow: 0 0 12px rgba(74, 222, 128, 0.9);
    }

    /* NAV TABS */

    .nav-tabs {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      background: rgba(15, 23, 42, 0.9);
      padding: 6px;
      border-radius: 999px;
      margin-bottom: 14px;
      border: 1px solid rgba(148, 163, 184, 0.4);
    }

    .nav-btn {
      border: none;
      border-radius: 999px;
      padding: 6px 4px;
      font-size: 11px;
      color: var(--text-soft);
      background: transparent;
      cursor: pointer;
      transition: all 0.18s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
      white-space: nowrap;
    }

    .nav-btn span.dot {
      width: 5px;
      height: 5px;
      border-radius: 999px;
      background: transparent;
    }

    .nav-btn.active {
      background: radial-gradient(circle at top, rgba(56, 189, 248, 0.3) 0, rgba(15, 23, 42, 0.9) 40%);
      color: var(--accent-strong);
      box-shadow: 0 0 18px rgba(56, 189, 248, 0.5);
    }

    .nav-btn.active span.dot {
      background: var(--accent-strong);
    }

    /* TABS CONTENT */

    .tab {
      display: none;
    }

    .tab.active {
      display: block;
    }

    /* DASHBOARD CARD */

    .section-title-line {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 6px;
    }

    .section-title-line h2 {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: #e5e7eb;
    }

    .section-title-line span {
      font-size: 11px;
      color: var(--text-soft);
    }

    .card-main {
      margin-top: 6px;
      background: linear-gradient(145deg, rgba(15, 23, 42, 0.95), rgba(12, 74, 110, 0.85));
      border-radius: 18px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      padding: 12px;
      box-shadow:
        0 12px 26px rgba(15, 23, 42, 0.85),
        0 0 30px rgba(56, 189, 248, 0.6);
    }

    .pill-row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
      flex-wrap: wrap;
    }

    .pill {
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      font-size: 11px;
      color: var(--text-soft);
      background: rgba(15, 23, 42, 0.7);
    }

    .pill strong {
      color: #e5e7eb;
    }

    .pill.mode {
      border-color: rgba(56, 189, 248, 0.9);
      background: radial-gradient(circle at top, rgba(56, 189, 248, 0.4) 0, rgba(15, 23, 42, 0.8) 45%);
      color: var(--accent-strong);
    }

    .session-box {
      margin-top: 4px;
      background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.25) 0, rgba(15, 23, 42, 0.95) 45%);
      border-radius: 14px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      padding: 10px;
    }

    .session-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .session-header span {
      font-size: 11px;
      color: var(--text-soft);
    }

    .session-header strong {
      font-size: 11px;
      color: #bbf7d0;
      background: rgba(21, 128, 61, 0.25);
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(34, 197, 94, 0.6);
    }

    .session-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 6px;
    }

    .session-text {
      font-size: 11px;
      color: var(--text-soft);
      margin-bottom: 10px;
    }

    .btn-setup {
      width: 100%;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, #f97316, #fb923c);
      color: #111827;
      padding: 7px 10px;
      font-size: 12px;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      cursor: pointer;
      box-shadow: 0 12px 25px rgba(248, 150, 30, 0.65);
      margin-bottom: 10px;
    }

    .btn-setup span.dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #f97316;
      box-shadow: 0 0 14px rgba(248, 150, 30, 0.9);
    }

    .timeframe-row {
      display: flex;
      gap: 6px;
      margin-bottom: 10px;
      flex-wrap: wrap;
    }

    .tf-pill {
      flex: 1;
      min-width: 0;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.65);
      background: var(--pill-bg);
      color: var(--text-soft);
      font-size: 11px;
      padding: 6px 4px;
      text-align: center;
      cursor: pointer;
      transition: all 0.16s ease;
    }

    .tf-pill.active {
      background: radial-gradient(circle at top, rgba(56, 189, 248, 0.35) 0, rgba(15, 23, 42, 0.9) 50%);
      border-color: rgba(56, 189, 248, 0.95);
      color: var(--accent-strong);
      box-shadow: 0 0 18px rgba(56, 189, 248, 0.7);
    }

    .next-signal-card {
      background: rgba(15, 23, 42, 0.9);
      border-radius: 12px;
      padding: 8px 9px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      margin-bottom: 6px;
    }

    .next-row {
      display: grid;
      grid-template-columns: 1.2fr 0.9fr;
      gap: 6px;
      font-size: 11px;
      margin-bottom: 6px;
    }

    .next-label {
      color: var(--text-soft);
      text-transform: uppercase;
      letter-spacing: 0.14em;
      font-size: 10px;
      margin-bottom: 2px;
    }

    .next-value {
      color: #e5e7eb;
      font-weight: 600;
    }

    .next-highlight {
      border-radius: 8px;
      background: rgba(8, 47, 73, 0.9);
      border: 1px dashed rgba(56, 189, 248, 0.75);
      padding: 6px 7px;
      font-size: 11px;
      color: var(--accent-strong);
    }

    .next-highlight small {
      display: block;
      color: var(--text-soft);
      margin-top: 3px;
      font-size: 10px;
    }

    .history-title {
      margin-top: 10px;
      font-size: 11px;
      color: var(--text-soft);
    }

    .history-list {
      margin-top: 6px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .history-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 7px 8px;
      border-radius: 10px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(31, 41, 55, 0.95);
    }

    .pair-side {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .pair-side strong {
      font-size: 12px;
    }

    .pair-side span {
      font-size: 10px;
      color: var(--text-soft);
    }

    .result-tag {
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      border-width: 1px;
      border-style: solid;
    }

    .result-win {
      border-color: rgba(34, 197, 94, 0.7);
      color: #bbf7d0;
      background: rgba(21, 128, 61, 0.18);
    }

    .result-loss {
      border-color: rgba(248, 113, 113, 0.7);
      color: #fecaca;
      background: rgba(127, 29, 29, 0.3);
    }

    .result-pct {
      font-size: 11px;
      margin-left: 6px;
    }

    .pct-green {
      color: #4ade80;
    }

    .pct-red {
      color: #fb7185;
    }

    /* TAB: SINAIS */

    .signals-wrap {
      background: rgba(15, 23, 42, 0.92);
      border-radius: 16px;
      border: 1px solid rgba(148, 163, 184, 0.55);
      padding: 10px;
      margin-top: 4px;
    }

    .signals-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
      font-size: 11px;
    }

    .signals-header span {
      color: var(--text-soft);
    }

    .tag-live {
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(56, 189, 248, 0.8);
      color: var(--accent-strong);
      background: rgba(15, 23, 42, 0.9);
      font-size: 10px;
    }

    .signals-table {
      margin-top: 4px;
      border-radius: 10px;
      border: 1px solid rgba(31, 41, 55, 0.95);
      overflow: hidden;
    }

    .signals-row {
      display: grid;
      grid-template-columns: 0.9fr 0.7fr 0.6fr 0.5fr;
      gap: 4px;
      padding: 6px 7px;
      font-size: 10px;
      align-items: center;
      background: rgba(15, 23, 42, 0.92);
    }

    .signals-row:nth-child(even) {
      background: rgba(15, 23, 42, 0.98);
    }

    .signals-row.header {
      background: rgba(15, 23, 42, 0.99);
      font-weight: 600;
      color: var(--text-soft);
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    .badge-call {
      color: #bbf7d0;
    }

    .badge-put {
      color: #fecaca;
    }

    /* TAB: ESTAT√çSTICAS */

    .stats-wrap {
      background: rgba(15, 23, 42, 0.95);
      border-radius: 16px;
      border: 1px solid rgba(148, 163, 184, 0.55);
      padding: 10px;
      margin-top: 4px;
      font-size: 11px;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: 1.2fr 1fr;
      gap: 8px;
      margin-top: 6px;
    }

    .stat-card {
      background: rgba(15, 23, 42, 0.95);
      border-radius: 10px;
      border: 1px solid rgba(31, 41, 55, 0.95);
      padding: 8px;
    }

    .stat-label {
      color: var(--text-soft);
      font-size: 10px;
      margin-bottom: 3px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    .stat-value {
      font-size: 14px;
      font-weight: 600;
    }

    .stat-green {
      color: #4ade80;
    }

    .stat-yellow {
      color: #facc15;
    }

    .stats-pairs {
      margin-top: 8px;
    }

    .pair-line {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 4px 0;
      border-bottom: 1px solid rgba(31, 41, 55, 0.8);
      font-size: 10px;
    }

    .pair-line:last-child {
      border-bottom: none;
    }

    /* FOOTER */

    .footer {
      margin-top: 12px;
      padding-top: 8px;
      border-top: 1px solid rgba(31, 41, 55, 0.9);
      display: flex;
      flex-direction: column;
      gap: 2px;
      font-size: 10px;
      color: var(--text-soft);
      text-align: center;
    }

    .footer span strong {
      color: var(--accent-strong);
    }

    .footer small {
      color: #6b7280;
    }

    @media (max-width: 380px) {
      .app-inner {
        padding: 14px 12px 16px 12px;
      }
      .next-row {
        grid-template-columns: 1.1fr 1fr;
      }
    }
  </style>
</head>
<body>
  <main class="app">
    <div class="app-inner">
      <!-- HEADER -->
      <header class="header">
        <div class="header-left">
          <div class="avatar">üê∫</div>
          <div class="header-title">
            <h1>Wolf Signals</h1>
            <span>Pocket Option ‚Ä¢ M1/M5 ‚Ä¢ OTC</span>
          </div>
        </div>
        <div class="status-pill">
          <span class="status-dot"></span>
          Online
        </div>
      </header>

      <!-- NAV TABS -->
      <nav class="nav-tabs">
        <button class="nav-btn active" data-tab-btn="dashboard">
          <span class="dot"></span>
          Dashboard
        </button>
        <button class="nav-btn" data-tab-btn="signals">
          <span class="dot"></span>
          Sinais
        </button>
        <button class="nav-btn" data-tab-btn="stats">
          <span class="dot"></span>
          Estat√≠sticas
        </button>
      </nav>

      <!-- TAB: DASHBOARD -->
      <section class="tab active" id="tab-dashboard">
        <div class="section-title-line">
          <h2>sess√£o de sinais</h2>
          <span>Live ‚Ä¢ Hoje</span>
        </div>

        <div class="card-main">
          <div class="pill-row">
            <div class="pill mode">
              üî• <strong>Setup Wolf Sniper ‚Ä¢ Retra√ß√£o</strong>
            </div>
            <div class="pill">
              Base: <strong>M1 + M5</strong> ‚Ä¢ OTC
            </div>
          

          <div class="session-box">
            <div class="session-header">
              <span>Mini app carregado com sucesso ‚úÖ</span>
              <strong>Auto ‚Ä¢ An√°lise 100% t√©cnica</strong>
            </div>
            <p class="session-title">
              Use o painel abaixo para acompanhar os sinais e a performance da estrat√©gia Wolf Sniper Trader.
            </p>
            <p <!-- TIMEFRAMES -->
<div class="timeframe-row">
  <button class="tf-pill active" data-timeframe="M5">
    M5 ‚Ä¢ Retra√ß√£o principal
  </button>
  <button class="tf-pill" data-timeframe="M1">
    M1 ‚Ä¢ Filtro de entrada
  </button>
</div>

<!-- BOT√ïES DE AN√ÅLISE -->
<div class="analysis-actions">
  <button id="btnRealizarAnalise" class="btn-setup btn-sniper">
    Realizar an√°lise sniper
  </button>
  <button id="btnProximaAnalise" class="tf-pill btn-next" disabled>
    Pr√≥xima an√°lise
  </button>
</div>

<p id="statusAnalise" class="session-text status-text">
  Toque em <b>‚ÄúRealizar an√°lise sniper‚Äù</b> para gerar o pr√≥ximo sinal.
</p>

<!-- PR√ìXIMO SINAL -->
<div class="next-signal-card">
  <div class="next-row">
    <div>
      <div class="next-label">Pr√≥ximo par</div>
      <div class="next-value" id="proximoPar">EURUSD OTC</div>

      <div class="next-label" style="margin-top: 4px;">Dire√ß√£o</div>
      <div class="next-value" id="proximaDirecao">
        Aguardando an√°lise‚Ä¶
      </div>
    </div>

    <div>
      <div class="next-label">Hor√°rio de entrada</div>
      <div class="next-value" id="proximoHorario">--:-- ‚Ä¢ Bras√≠lia</div>

      <div class="next-label" style="margin-top: 4px;">Timeframe</div>
      <div class="next-value" id="proximoTimeframe">
        M5 ‚Ä¢ Expira√ß√£o 5 min
      </div>
    </div>
  </div>

  <div class="next-row" style="margin-top: 10px; border-top: 1px dashed rgba(148,163,184,.4); padding-top: 8px;">
    <div>
      <div class="next-label">Sa√≠da prevista</div>
      <div class="next-value" id="saidaPrevista">--:-- ‚Ä¢ Bras√≠lia</div>
    </div>

    <div>
      <div class="next-label">Cen√°rio com maior probabilidade</div>
      <div class="next-value" id="melhorCenario">
        Aguardando an√°lise‚Ä¶
      </div>
    </div>
  </div>
</div>
          <div class="history-list">
            <div class="history-item">
              <div class="pair-side">
                <strong>EURUSD OTC</strong>
                <span>M5 ‚Ä¢ CALL ‚Ä¢ Retra√ß√£o na banda inferior</span>
              </div>
              <div style="display:flex;align-items:center;">
                <span class="result-tag result-win">WIN</span>
                <span class="result-pct pct-green">+0.87%</span>
              </div>
            </div>

            <div class="history-item">
              <div class="pair-side">
                <strong>GBPUSD OTC</strong>
                <span>M5 ‚Ä¢ PUT ‚Ä¢ Retra√ß√£o na banda superior</span>
              </div>
              <div style="display:flex;align-items:center;">
                <span class="result-tag result-loss">LOSS</span>
                <span class="result-pct pct-red">-1.00%</span>
              </div>
            </div>

            <div class="history-item">
              <div class="pair-side">
                <strong>USDJPY OTC</strong>
                <span>M1 ‚Ä¢ CALL ‚Ä¢ Filtro a favor da tend√™ncia</span>
              </div>
              <div style="display:flex;align-items:center;">
                <span class="result-tag result-win">WIN</span>
                <span class="result-pct pct-green">+0.63%</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- TAB: SINAIS -->
      <section class="tab" id="tab-signals">
        <div class="section-title-line">
          <h2>sinais ao vivo</h2>
          <span>Base M1 + M5 ‚Ä¢ OTC</span>
        </div>

        <div class="signals-wrap">
          <div class="signals-header">
            <span>√öltimos sinais (exemplo)</span>
            <span class="tag-live">Streaming do bot Python</span>
          </div>

          <div class="signals-table">
            <div class="signals-row header">
              <div>Par</div>
              <div>Timeframe</div>
              <div>Dire√ß√£o</div>
              <div>Resultado</div>
            </div>

            <div class="signals-row">
              <div>EURUSD OTC</div>
              <div>M5 ‚Ä¢ 5 min</div>
              <div class="badge-call">CALL</div>
              <div class="pct-green">WIN</div>
            </div>

            <div class="signals-row">
              <div>GBPUSD OTC</div>
              <div>M5 ‚Ä¢ 5 min</div>
              <div class="badge-put">PUT</div>
              <div class="pct-red">LOSS</div>
            </div>

            <div class="signals-row">
              <div>USDJPY OTC</div>
              <div>M1 ‚Ä¢ 1 min</div>
              <div class="badge-call">CALL</div>
              <div class="pct-green">WIN</div>
            </div>

            <div class="signals-row">
              <div>EURUSD OTC</div>
              <div>M1 ‚Ä¢ 1 min</div>
              <div class="badge-put">PUT</div>
              <div class="pct-green">WIN</div>
            </div>
          </div>
        </div>
      </section>

      <!-- TAB: ESTAT√çSTICAS -->
      <section class="tab" id="tab-stats">
        <div class="section-title-line">
          <h2>estat√≠sticas</h2>
          <span>Somente M1 + M5 OTC</span>
        </div>

        <div class="stats-wrap">
          <p>
            Esses n√∫meros s√£o apenas modelo de layout.
            Depois sua engine Python vai atualizar tudo com base nos resultados reais dos sinais.
          </p>

          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-label">Winrate geral (exemplo)</div>
              <div class="stat-value stat-green">83.4%</div>
              <div class="stat-label" style="margin-top:6px;">Amostra</div>
              <div class="stat-value">√öltimos 120 sinais</div>
            </div>

            <div class="stat-card">
              <div class="stat-label">Lucro estimado</div>
              <div class="stat-value stat-yellow">+27.5%</div>
              <div class="stat-label" style="margin-top:6px;">Gerado com</div>
              <div class="stat-value">Soros + M√£o base</div>
            </div>
          </div>

          <div class="stats-pairs">
            <div class="stat-label" style="margin-bottom:4px;">Acertividade por par (exemplo)</div>

            <div class="pair-line">
              <span>EURUSD OTC ‚Ä¢ M5</span>
              <span class="pct-green">87.5%</span>
            </div>
            <div class="pair-line">
              <span>GBPUSD OTC ‚Ä¢ M5</span>
              <span class="pct-green">82.0%</span>
            </div>
            <div class="pair-line">
              <span>USDJPY OTC ‚Ä¢ M1</span>
              <span class="pct-green">79.3%</span>
            </div>
            <div class="pair-line">
              <span>EURUSD OTC ‚Ä¢ M1</span>
              <span class="pct-green">81.1%</span>
            </div>
          </div>
        </div>
      </section>

      <!-- FOOTER -->
      <footer class="footer">
        <span>Desenvolvido por <strong>Wolf Sniper Trader</strong> üê∫üíπ</span>
        <small>Layout do mini app ‚Ä¢ Dados reais vir√£o da sua engine de sinais em Python.</small>
      </footer>
    </div>
  </main>

  <script>
    // Tabs (Dashboard / Sinais / Estat√≠sticas)
    const tabButtons = document.querySelectorAll("[data-tab-btn]");
    const tabs = document.querySelectorAll(".tab");

    tabButtons.forEach((btn) => {
      btn.addEventListener("click", () => {
        const target = btn.getAttribute("data-tab-btn");

        tabButtons.forEach((b) => b.classList.remove("active"));
        tabs.forEach((t) => t.classList.remove("active"));

        btn.classList.add("active");
        const tab = document.getElementById(`tab-${target}`);
        if (tab) tab.classList.add("active");
      });
    });

    // Timeframe pills (M1 / M5)
    const tfButtons = document.querySelectorAll("[data-tf]");
    tfButtons.forEach((tf) => {
      tf.addEventListener("click", () => {
        tfButtons.forEach((b) => b.classList.remove("active"));
        tf.classList.add("active");
      });
    });

    // Rel√≥gio simples de Bras√≠lia no card "Hor√°rio"
    function updateClock() {
      const el = document.getElementById("next-time");
      if (!el) return;
      const now = new Date();
      try {
        const opts = { hour: "2-digit", minute: "2-digit", hour12: false, timeZone: "America/Sao_Paulo" };
        el.textContent = now.toLocaleTimeString("pt-BR", opts);
      } catch (e) {
        // fallback caso o navegador n√£o suporte timeZone
        const opts = { hour: "2-digit", minute: "2-digit", hour12: false };
        el.textContent = now.toLocaleTimeString("pt-BR", opts);
      }
    }
    updateClock();
    setInterval(updateClock, 60000);
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const state = {
      timeframe: "M5",
      currentPairIndex: 0,
      pairs: ["EURUSD OTC", "GBPUSD OTC", "USDJPY OTC", "EURJPY OTC"],
    };

    const timeframeButtons = document.querySelectorAll(
      ".timeframe-row .tf-pill[data-timeframe]"
    );
    const btnAnalise = document.getElementById("btnRealizarAnalise");
    const btnProxima = document.getElementById("btnProximaAnalise");
    const statusEl = document.getElementById("statusAnalise");

    const elPar = document.getElementById("proximoPar");
    const elHorario = document.getElementById("proximoHorario");
    const elDirecao = document.getElementById("proximaDirecao");
    const elTimeframe = document.getElementById("proximoTimeframe");
    const elSaida = document.getElementById("saidaPrevista");
    const elCenario = document.getElementById("melhorCenario");

    // -------- sele√ß√£o M1 / M5 ----------
    timeframeButtons.forEach((btn) => {
      btn.addEventListener("click", () => {
        timeframeButtons.forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");
        state.timeframe = btn.dataset.timeframe; // "M1" ou "M5"
      });
    });

    function formatHora(date) {
      return (
        date.toLocaleTimeString("pt-BR", {
          hour: "2-digit",
          minute: "2-digit",
        }) + " ‚Ä¢ Bras√≠lia"
      );
    }

    function getNextPair() {
      const par = state.pairs[state.currentPairIndex % state.pairs.length];
      state.currentPairIndex++;
      return par;
    }

    // ------ simula an√°lise t√©cnica (depois vamos plugar na API Python) ------
    function gerarAnaliseFake(symbol) {
      const agora = new Date();
      const minutos = state.timeframe === "M5" ? 5 : 1;
      const entrada = new Date(agora.getTime() + 5000); // 5s pra ‚Äúpreparar‚Äù
      const expiracao = new Date(entrada.getTime() + minutos * 60000);

      let melhorCenario, probR, probV, direcao, descricao;

      if (state.timeframe === "M5") {
        melhorCenario = "Retra√ß√£o (M5)";
        probR = 83;
        probV = 62;
        direcao = "CALL";
        descricao = "Retra√ß√£o na banda inferior + fluxo comprador";
      } else {
        melhorCenario = "Revers√£o (M1)";
        probR = 64;
        probV = 79;
        direcao = "PUT";
        descricao = "Revers√£o em resist√™ncia + exaust√£o vendedora";
      }

      return {
        symbol,
        timeframe: state.timeframe,
        entradaStr: formatHora(entrada),
        saidaStr: formatHora(expiracao),
        timeframeStr: `${state.timeframe} ‚Ä¢ Expira√ß√£o ${minutos} min`,
        direcao,
        descricao,
        melhorCenario: `${melhorCenario} ‚Äî Retra√ß√£o: ${probR}% ‚Ä¢ Revers√£o: ${probV}%`,
      };
    }

    function aplicarResultadoView(r) {
      elPar.textContent = r.symbol;
      elHorario.textContent = r.entradaStr;
      elDirecao.textContent = `${r.direcao} ‚Ä¢ ${r.descricao}`;
      elTimeframe.textContent = r.timeframeStr;
      elSaida.textContent = r.saidaStr;
      elCenario.textContent = r.melhorCenario;
    }

    async function realizarAnalise() {
      const symbol = getNextPair();

      btnAnalise.disabled = true;
      btnProxima.disabled = true;

      statusEl.textContent =
        state.timeframe === "M5"
          ? "Sinal M5 WOLF SNIPER solicitado! ‚Äî preparando a an√°lise, aguarde..."
          : "Sinal M1 WOLF SNIPER solicitado! ‚Äî preparando a an√°lise, aguarde...";

      elPar.textContent = symbol;

      // simula tempo da engine Python
      await new Promise((resolve) => setTimeout(resolve, 1200));

      const resultado = gerarAnaliseFake(symbol);
      aplicarResultadoView(resultado);

      statusEl.textContent =
        "An√°lise conclu√≠da. Confira o sinal acima e aguarde o resultado para solicitar a pr√≥xima an√°lise.";
      btnProxima.disabled = false;
      btnAnalise.disabled = false;
    }

    btnAnalise.addEventListener("click", realizarAnalise);

    btnProxima.addEventListener("click", () => {
      statusEl.textContent =
        "Pr√≥xima an√°lise sniper solicitada! ‚Äî preparando novo ativo e recalculando a t√©cnica‚Ä¶";
      realizarAnalise();
    });
  });
</script>
</body>
</html>
